<?xml version="1.0" encoding="UTF-8"?>
<GenAiPromptTemplate xmlns="http://soap.sforce.com/2006/04/metadata">
    <description>Evaluates how well an AI response is grounded in the provided source material (anti-hallucination). Produces the RAGAS Faithfulness score.</description>
    <developerName>RAGAS_Faithfulness_Evaluator_V1</developerName>
    <masterLabel>RAGAS Faithfulness Evaluator V1</masterLabel>
    <templateVersions>
        <content>You are an expert evaluator assessing the faithfulness of AI responses to source material.

**Original Question**: {!$Input:original_question}

**Source Context**: {!$Input:original_context}

**AI Response**: {!$Input:ai_response}

Evaluate how well the AI response is grounded in the source context. Consider:
- Does the response contain information not present in the source?
- Are there hallucinated facts, names, or details?
- Is the response faithful to the tone and facts in the context?

Provide a faithfulness score from 0-100 where:
- 100 = Perfectly grounded, no hallucinations
- 75-99 = Mostly faithful with minor issues
- 50-74 = Moderately faithful but some unsupported claims
- 25-49 = Significant hallucinations or unsupported information  
- 0-24 = Mostly hallucinated or contradicts source

Return your assessment as JSON:
{
 &quot;faithfulness_score&quot;: [numeric score 0-100],
 &quot;reasoning&quot;: &quot;[detailed explanation of score]&quot;,
 &quot;hallucinated_elements&quot;: [&quot;list of any hallucinated content&quot;],
 &quot;grounded_elements&quot;: [&quot;list of properly grounded content&quot;]
}
</content>
        <inputs>
            <apiName>original_context</apiName>
            <definition>primitive://String</definition>
            <masterLabel>original context</masterLabel>
            <referenceName>Input:original_context</referenceName>
            <required>true</required>
        </inputs>
        <inputs>
            <apiName>ai_response</apiName>
            <definition>primitive://String</definition>
            <masterLabel>ai response</masterLabel>
            <referenceName>Input:ai_response</referenceName>
            <required>true</required>
        </inputs>
        <inputs>
            <apiName>original_question</apiName>
            <definition>primitive://String</definition>
            <masterLabel>original question</masterLabel>
            <referenceName>Input:original_question</referenceName>
            <required>true</required>
        </inputs>
        <primaryModel>sfdc_ai__DefaultOpenAIGPT4OmniMini</primaryModel>
        <status>Published</status>
    </templateVersions>
    <templateVersions>
        <content>You are an expert evaluator assessing the faithfulness of AI responses to source material.

**Original Question**: {!$Input:original_question}

**Source Context**: {!$Input:original_context}

**AI Response**: {!$Input:ai_response}

Evaluate forensically how well the AI response is grounded in the source context. Consider:
- Does the response contain information or present facts not present in the source grounding?
- Are there any hallucinated facts, names, or details?
- Is the response faithful to the tone and facts in the context?

Provide a faithfulness score from 0-100 where:
- 100 = Perfectly grounded, no hallucinations
- 75-99 = Mostly faithful with minor issues
- 50-74 = Moderately faithful but some unsupported claims
- 25-49 = Significant hallucinations or unsupported information  
- 0-24 = Mostly hallucinated or contradicts source

Return your assessment as JSON:
{
 &quot;faithfulness_score&quot;: [numeric score 0-100],
 &quot;reasoning&quot;: &quot;[detailed explanation of score]&quot;,
 &quot;hallucinated_elements&quot;: [&quot;list of any hallucinated content&quot;],
 &quot;grounded_elements&quot;: [&quot;list of properly grounded content&quot;]
}
</content>
        <inputs>
            <apiName>original_context</apiName>
            <definition>primitive://String</definition>
            <masterLabel>original context</masterLabel>
            <referenceName>Input:original_context</referenceName>
            <required>true</required>
        </inputs>
        <inputs>
            <apiName>ai_response</apiName>
            <definition>primitive://String</definition>
            <masterLabel>ai response</masterLabel>
            <referenceName>Input:ai_response</referenceName>
            <required>true</required>
        </inputs>
        <inputs>
            <apiName>original_question</apiName>
            <definition>primitive://String</definition>
            <masterLabel>original question</masterLabel>
            <referenceName>Input:original_question</referenceName>
            <required>true</required>
        </inputs>
        <primaryModel>sfdc_ai__DefaultGPT5</primaryModel>
        <status>Published</status>
    </templateVersions>
    <type>einstein_gpt__flex</type>
    <visibility>Global</visibility>
</GenAiPromptTemplate>
